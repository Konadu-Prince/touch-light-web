{
  "version": 3,
  "sources": ["../script.js"],
  "sourcesContent": ["const slider = document.getElementById(\"lightSlider\");\nconst label = document.getElementById(\"intensityLabel\");\nconst display = document.getElementById(\"lightDisplay\");\nconst copyLinkBtn = document.getElementById(\"copyLinkBtn\");\nconst resetBtn = document.getElementById(\"resetBtn\");\nconst intensityInput = document.getElementById(\"intensityInput\");\nconst themeToggleBtn = document.getElementById(\"themeToggleBtn\");\nconst installBtn = document.getElementById(\"installBtn\");\nconst cameraTorchBtn = document.getElementById('cameraTorchBtn');\nconst stopCameraBtn = document.getElementById('stopCameraBtn');\nconst torchSupportMsg = document.getElementById('torchSupportMsg');\nconst screenTorchBtn = document.getElementById('screenTorchBtn');\nconst screenTorchLevel = document.getElementById('screenTorchLevel');\nconst screenTorchOverlay = document.getElementById('screenTorchOverlay');\n\nconst STORAGE_KEY = \"light-intensity\";\nconst THEME_KEY = \"theme-preference\"; // 'light' | 'dark' | 'auto'\n\nfunction clamp(value, min, max) {\n  return Math.max(min, Math.min(max, value));\n}\n\nfunction setIntensity(intensity) {\n  const value = clamp(Number(intensity) || 0, 0, 255);\n  slider.value = String(value);\n  slider.setAttribute(\"aria-valuenow\", String(value));\n  label.textContent = `Light Intensity: ${value}`;\n  display.style.backgroundColor = `rgb(${value}, ${value}, ${value})`;\n  if (intensityInput) intensityInput.value = String(value);\n  try { localStorage.setItem(STORAGE_KEY, String(value)); } catch {}\n  const url = new URL(window.location.href);\n  url.searchParams.set(\"i\", String(value));\n  window.history.replaceState({}, \"\", url);\n}\n\nfunction readInitialIntensity() {\n  const url = new URL(window.location.href);\n  const fromQuery = url.searchParams.get(\"i\");\n  if (fromQuery !== null) return clamp(Number(fromQuery), 0, 255);\n  try {\n    const stored = localStorage.getItem(STORAGE_KEY);\n    if (stored !== null) return clamp(Number(stored), 0, 255);\n  } catch {}\n  return 0;\n}\n\nslider.addEventListener(\"input\", () => {\n  setIntensity(slider.value);\n});\n\nintensityInput?.addEventListener(\"input\", () => {\n  setIntensity(intensityInput.value);\n});\n\ncopyLinkBtn?.addEventListener(\"click\", async () => {\n  try {\n    await navigator.clipboard.writeText(window.location.href);\n    copyLinkBtn.textContent = \"Copied!\";\n    setTimeout(() => (copyLinkBtn.textContent = \"Copy link\"), 1200);\n  } catch {}\n});\n\nresetBtn?.addEventListener(\"click\", () => {\n  setIntensity(0);\n});\n\ndocument.querySelectorAll('.preset').forEach((btn) => {\n  btn.addEventListener('click', () => {\n    const value = btn.getAttribute('data-value');\n    if (value != null) setIntensity(Number(value));\n  });\n});\n\n// Service worker registration (PWA)\nif (\"serviceWorker\" in navigator) {\n  window.addEventListener(\"load\", () => {\n    const swUrl = new URL('sw.js', window.location.href).toString();\n    navigator.serviceWorker.register(swUrl).catch(() => {});\n  });\n}\n\n// Initialize\nsetIntensity(readInitialIntensity());\n\n// Theme handling\nfunction applyTheme(theme) {\n  const root = document.documentElement;\n  if (theme === 'auto') {\n    root.removeAttribute('data-theme');\n  } else {\n    root.setAttribute('data-theme', theme);\n  }\n  if (themeToggleBtn) themeToggleBtn.textContent = `Theme: ${theme[0].toUpperCase()}${theme.slice(1)}`;\n}\n\nfunction getInitialTheme() {\n  try {\n    const stored = localStorage.getItem(THEME_KEY);\n    if (stored === 'light' || stored === 'dark' || stored === 'auto') return stored;\n  } catch {}\n  return 'auto';\n}\n\nlet currentTheme = getInitialTheme();\napplyTheme(currentTheme);\n\nthemeToggleBtn?.addEventListener('click', () => {\n  const order = ['auto', 'light', 'dark'];\n  const next = order[(order.indexOf(currentTheme) + 1) % order.length];\n  currentTheme = next;\n  try { localStorage.setItem(THEME_KEY, next); } catch {}\n  applyTheme(next);\n});\n\n// Install prompt handling\nlet deferredPrompt = null;\nwindow.addEventListener('beforeinstallprompt', (e) => {\n  e.preventDefault();\n  deferredPrompt = e;\n  installBtn?.classList.remove('hidden');\n});\n\ninstallBtn?.addEventListener('click', async () => {\n  if (!deferredPrompt) return;\n  deferredPrompt.prompt();\n  const { outcome } = await deferredPrompt.userChoice;\n  if (outcome) {\n    installBtn.classList.add('hidden');\n  }\n  deferredPrompt = null;\n});\n\n// Torch feature: camera LED\nlet mediaStream = null;\nasync function enableCameraTorch() {\n  if (!('mediaDevices' in navigator) || !navigator.mediaDevices.getUserMedia) {\n    torchSupportMsg.textContent = 'Camera API not supported on this device.';\n    return;\n  }\n  try {\n    // Request rear camera if available\n    mediaStream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: { ideal: 'environment' } } });\n    const track = mediaStream.getVideoTracks()[0];\n    const capabilities = track.getCapabilities?.() || {};\n    if (!('torch' in capabilities)) {\n      torchSupportMsg.textContent = 'Torch capability not available. Some devices/browsers do not expose it.';\n      return;\n    }\n    await track.applyConstraints({ advanced: [{ torch: true }] });\n    torchSupportMsg.textContent = 'Camera torch enabled. Keep the page open to maintain torch.';\n  } catch (err) {\n    torchSupportMsg.textContent = 'Could not enable camera torch (permission or capability).';\n  }\n}\n\nfunction stopCamera() {\n  if (mediaStream) {\n    mediaStream.getTracks().forEach(t => t.stop());\n    mediaStream = null;\n    torchSupportMsg.textContent = 'Camera stopped.';\n  }\n}\n\ncameraTorchBtn?.addEventListener('click', enableCameraTorch);\nstopCameraBtn?.addEventListener('click', stopCamera);\n\n// Torch feature: screen torch + wake lock\nlet wakeLock = null;\nasync function requestWakeLock() {\n  try {\n    if ('wakeLock' in navigator) {\n      wakeLock = await navigator.wakeLock.request('screen');\n      wakeLock.addEventListener('release', () => { /* no-op */ });\n    }\n  } catch {}\n}\n\nfunction setScreenTorch(on) {\n  if (!screenTorchOverlay) return;\n  if (on) {\n    screenTorchOverlay.hidden = false;\n    screenTorchOverlay.style.opacity = '1';\n    requestWakeLock();\n  } else {\n    screenTorchOverlay.hidden = true;\n    if (wakeLock) { try { wakeLock.release(); } catch {} finally { wakeLock = null; } }\n  }\n}\n\nscreenTorchBtn?.addEventListener('click', () => {\n  const isOn = !!screenTorchOverlay && !screenTorchOverlay.hidden;\n  setScreenTorch(!isOn);\n});\n\nscreenTorchLevel?.addEventListener('input', () => {\n  const level = Math.max(0, Math.min(100, Number(screenTorchLevel.value) || 0));\n  // simulate brightness by opacity blend over underlying UI\n  screenTorchOverlay.style.opacity = String(level / 100);\n});\n"],
  "mappings": "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",
  "names": ["slider", "label", "display", "copyLinkBtn", "resetBtn", "intensityInput", "themeToggleBtn", "installBtn", "cameraTorchBtn", "stopCameraBtn", "torchSupportMsg", "screenTorchBtn", "screenTorchLevel", "screenTorchOverlay", "STORAGE_KEY", "THEME_KEY", "clamp", "value", "min", "max", "setIntensity", "intensity", "url", "readInitialIntensity", "fromQuery", "stored", "btn", "swUrl", "applyTheme", "theme", "root", "getInitialTheme", "currentTheme", "order", "next", "deferredPrompt", "outcome", "mediaStream", "enableCameraTorch", "track", "stopCamera", "t", "wakeLock", "requestWakeLock", "setScreenTorch", "on", "isOn", "level"]
}
