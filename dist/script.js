(()=>{var o=document.getElementById("lightSlider"),y=document.getElementById("intensityLabel"),f=document.getElementById("lightDisplay"),c=document.getElementById("copyLinkBtn"),p=document.getElementById("resetBtn"),a=document.getElementById("intensityInput"),l=document.getElementById("themeToggleBtn"),s=document.getElementById("installBtn"),m="light-intensity",g="theme-preference";function d(t,e,n){return Math.max(e,Math.min(n,t))}function i(t){let e=d(Number(t)||0,0,255);o.value=String(e),o.setAttribute("aria-valuenow",String(e)),y.textContent=`Light Intensity: ${e}`,f.style.backgroundColor=`rgb(${e}, ${e}, ${e})`,a&&(a.value=String(e));try{localStorage.setItem(m,String(e))}catch{}let n=new URL(window.location.href);n.searchParams.set("i",String(e)),window.history.replaceState({},"",n)}function v(){let e=new URL(window.location.href).searchParams.get("i");if(e!==null)return d(Number(e),0,255);try{let n=localStorage.getItem(m);if(n!==null)return d(Number(n),0,255)}catch{}return 0}o.addEventListener("input",()=>{i(o.value)});a?.addEventListener("input",()=>{i(a.value)});c?.addEventListener("click",async()=>{try{await navigator.clipboard.writeText(window.location.href),c.textContent="Copied!",setTimeout(()=>c.textContent="Copy link",1200)}catch{}});p?.addEventListener("click",()=>{i(0)});document.querySelectorAll(".preset").forEach(t=>{t.addEventListener("click",()=>{let e=t.getAttribute("data-value");e!=null&&i(Number(e))})});"serviceWorker"in navigator&&window.addEventListener("load",()=>{let t=new URL("sw.js",window.location.href).toString();navigator.serviceWorker.register(t).catch(()=>{})});i(v());function h(t){let e=document.documentElement;t==="auto"?e.removeAttribute("data-theme"):e.setAttribute("data-theme",t),l&&(l.textContent=`Theme: ${t[0].toUpperCase()}${t.slice(1)}`)}function E(){try{let t=localStorage.getItem(g);if(t==="light"||t==="dark"||t==="auto")return t}catch{}return"auto"}var u=E();h(u);l?.addEventListener("click",()=>{let t=["auto","light","dark"],e=t[(t.indexOf(u)+1)%t.length];u=e;try{localStorage.setItem(g,e)}catch{}h(e)});var r=null;window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),r=t,s?.classList.remove("hidden")});s?.addEventListener("click",async()=>{if(!r)return;r.prompt();let{outcome:t}=await r.userChoice;t&&s.classList.add("hidden"),r=null});})();
//# sourceMappingURL=script.js.map
